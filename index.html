<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Guerreiros da Luz</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap');

body{
  margin:0;
  font-family:'Orbitron', sans-serif;
  background:radial-gradient(circle at top,#1b2a4e,#05070f);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
}

.app{
  width:94%;
  max-width:420px;
  background:linear-gradient(180deg,#0b1020,#02040a);
  border-radius:30px;
  padding:22px;
  box-shadow:0 0 40px rgba(0,140,255,.4);
}

.hud{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:15px;
}

.score{
  background:#0077ff;
  padding:6px 14px;
  border-radius:16px;
}

.sound{
  cursor:pointer;
  font-size:18px;
}

.card{
  background:rgba(255,255,255,.05);
  border-radius:22px;
  padding:22px;
  text-align:center;
}

.title{
  font-size:22px;
  font-weight:900;
  margin-bottom:10px;
}

button{
  width:100%;
  padding:14px;
  margin:10px 0;
  border:none;
  border-radius:16px;
  background:linear-gradient(135deg,#ff2a2a,#b00000);
  color:#fff;
  font-weight:700;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="app" id="app"></div>

<script>
// ======= AUDIO ENGINE =======
const AudioCtx = window.AudioContext || window.webkitAudioContext;
const audioCtx = new AudioCtx();
let somLigado = true;

function beep(freq, tempo){
  if(!somLigado) return;
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.frequency.value = freq;
  osc.start();
  gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + tempo);
  osc.stop(audioCtx.currentTime + tempo);
}

// m√∫sica ambiente (loop suave)
let musica;
function musicaFundo(){
  if(!somLigado) return;
  musica = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  musica.type = "sine";
  musica.frequency.value = 120;
  musica.connect(gain);
  gain.connect(audioCtx.destination);
  gain.gain.value = 0.03;
  musica.start();
}

function pararMusica(){
  if(musica) musica.stop();
}

// ======= JOGO =======
const niveis = ["CRIAN√áAS","JOVENS","ADULTOS"];
let nivelAtual = 0;
let perguntaAtual = 0;
let pontos = 0;

const perguntas = [
  [
    {q:"Quem construiu a arca?", r:["No√©","Mois√©s","Abra√£o"], c:0},
    {q:"Quem venceu Golias?", r:["Davi","Saul","Sans√£o"], c:0}
  ],
  [
    {q:"Quem libertou Israel do Egito?", r:["Mois√©s","Josu√©","Davi"], c:0}
  ],
  [
    {q:"Quem escreveu a maioria das cartas?", r:["Paulo","Pedro","Jo√£o"], c:0}
  ]
];

function render(){
  const p = perguntas[nivelAtual][perguntaAtual];

  document.getElementById("app").innerHTML = `
    <div class="hud">
      <div>${niveis[nivelAtual]}</div>
      <div class="score">‚≠ê ${pontos}</div>
      <div class="sound" onclick="toggleSom()">üîä</div>
    </div>

    <div class="card">
      <div class="title">‚öîÔ∏è Guerreiros da Luz</div>
      <p>${p.q}</p>
      ${p.r.map((op,i)=>`
        <button onclick="answer(${i})">${op}</button>
      `).join("")}
    </div>
  `;
}

function toggleSom(){
  somLigado = !somLigado;
  if(!somLigado) pararMusica();
  else musicaFundo();
  render();
}

function answer(i){
  const p = perguntas[nivelAtual][perguntaAtual];

  if(i === p.c){
    pontos += 10;
    beep(800,0.3);
  }else{
    beep(200,0.5);
  }

  document.getElementById("app").innerHTML += `
    <button onclick="next()">Continuar</button>
  `;
}

function next(){
  perguntaAtual++;
  if(perguntaAtual < perguntas[nivelAtual].length){
    render();
  }else{
    nivelAtual++;
    perguntaAtual = 0;
    beep(1200,0.6);

    if(nivelAtual < perguntas.length){
      render();
    }else{
      pararMusica();
      document.getElementById("app").innerHTML = `
        <div class="card">
          <div class="title">üèÜ Her√≥i da F√©</div>
          <p>Pontua√ß√£o Final: ‚≠ê ${pontos}</p>
          <button onclick="location.reload()">Jogar novamente</button>
        </div>
      `;
    }
  }
}

// iniciar
document.body.addEventListener("click", ()=>{
  if(audioCtx.state === "suspended") audioCtx.resume();
  if(!musica) musicaFundo();
},{once:true});

render();
</script>

</body>
</html>
